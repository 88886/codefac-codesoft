<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<ui:composition xmlns="http://www.w3.org/1999/xhtml" 
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core" 
                xmlns:ui="http://java.sun.com/jsf/facelets" 
                xmlns:p="http://primefaces.org/ui"
                template="/template/plantilladmin.xhtml">


    <ui:define name="contenido" >
        <h:form id="form">
            <p:panel id="panelTablaDistribuidores" style="z-index: 0">
                <p:growl id="msgs" showDetail="true"/>
                <p:dataTable
                    style="height: 100%"
                    id="tablaDistribuidores"
                    var="distribuidor" 
                    value="#{distribuidorMB.distribuidores}"
                    scrollable="true" 
                    selectionMode="single" 
                    rowKey="#{distribuidor.ruc}"
                    selection="#{distribuidorMB.distribuidorSeleccionado}">

                    <p:ajax event="rowSelect" listener="#{distribuidorMB.onRowSelect}" update=":form:msgs,btnEditarDistribuidor"/>
                    <p:ajax event="rowUnselect" listener="#{distribuidorMB.onRowUnSelect}"/>



                    <f:facet name="header" >                               
                        <p:commandButton id="btnNuevoDistribiudor" process="tablaDistribuidores" icon="ui-icon-plus" onclick="PF('nuevoDistribuidor').show();" actionListener="#{distribuidorMB.enCrear()}" style="width: 20px;height: 20px"/>  
                        <p:commandButton id="btnEditarDistribuidor" process="tablaDistribuidores" icon="ui-icon-pencil" onclick="PF('nuevoDistribuidor').show();" actionListener="#{distribuidorMB.enModificar()}" disabled="#{distribuidorMB.flagBoton1}" style="width: 20px;height: 20px" update=":form:panelGrid" />                          
                    </f:facet>


                    <p:column headerText="RUC" filterBy="#{distribuidor.ruc}" filterMatchMode="contains" >
                        <h:outputText value="#{distribuidor.ruc}" />
                    </p:column>

                    <p:column headerText="Nombre" filterBy="#{distribuidor.nombre}" filterMatchMode="contains" >
                        <h:outputText value="#{distribuidor.nombre}" />
                    </p:column>

                    <p:column headerText="Ciudad" >
                        <h:outputText value="#{distribuidor.ciudad}" />
                    </p:column>

                    <p:column headerText="Direccion" >
                        <h:outputText value="#{distribuidor.direccion}" />
                    </p:column>

                    <p:column headerText="Telefono" >
                        <h:outputText value="#{distribuidor.telefono}" />
                    </p:column>

                    <p:column headerText="Tipo de Pago" >
                        <h:outputText value="#{distribuidor.tipoPago}" />
                    </p:column>

                    <p:column headerText="Correo" >
                        <h:outputText value="#{distribuidor.correo}" />
                    </p:column>

                    <p:column headerText="Notas" >
                        <p:inputTextarea value="#{distribuidor.notas}" readonly="true" />
                    </p:column>

                </p:dataTable>

                <!-- Dialogo para grabar un nuevo distribuidor -->
                <p:dialog  id="dlgDistribuidor" header="Administracion Distribuidor" widgetVar="nuevoDistribuidor" modal="true" height="auto">
                    <p:panelGrid columns="3" id="panelGrid">   
                        <p:outputLabel for="disRuc" value="RUC :" />

                        <p:inputText id="disRuc" value="#{distribuidorMB.distribuidor.ruc}" required="true" requiredMessage="RUC necesario">
                            <p:ajax event="blur" listener="#{distribuidorMB.verificarDistribuidorExiste()}"  />
                        </p:inputText>

                        <p:message for="disRuc" />                  

                        <p:outputLabel for="disNombre" value="Nombre:" />
                        <p:inputText id="disNombre" value="#{distribuidorMB.distribuidor.nombre}" required="true" requiredMessage="Nombre necesario"/>
                        <p:message for="disNombre" /> 

                        <p:outputLabel for="disCiudad" value="Ciudad" />
                        <p:inputText id="disCiudad" value="#{distribuidorMB.distribuidor.ciudad}" required="true" />
                        <p:message for="disCiudad" />

                        <p:outputLabel for="disDireccion" value="Direccion:" />
                        <p:inputText id="disDireccion" value="#{distribuidorMB.distribuidor.direccion}" />
                        <p:message for="disDireccion" />   

                        <p:outputLabel for="disTelefono" value="Telefono :" />
                        <p:inputText id="disTelefono" value="#{distribuidorMB.distribuidor.telefono}" required="true" requiredMessage="Telefono necesario"/>
                        <p:message for="disTelefono" />


                        <p:outputLabel for="disContacto" value="Contacto :" />
                        <p:inputText id="disContacto" value="#{distribuidorMB.distribuidor.contacto}" required="true" />
                        <p:message for="disContacto" />


                        <p:outputLabel for="tipoPago" value="Tipo de pagos" />
                        <p:multiSelectListbox id="tipoPago" value="#{distribuidorMB.pagoDistribuidor}" effect="slide" >
                            <f:selectItems value="#{distribuidorMB.tipoPagos}" />
                        </p:multiSelectListbox>
                        <p:message for="tipoPago" />  

                        <p:outputLabel for="disCorreo" value="Correo :" />
                        <p:inputText id="disCorreo" value="#{distribuidorMB.distribuidor.contacto}" required="true"/>
                        <p:message for="disCorreo" />

                        <p:outputLabel for="disNotas" value="Notas" />
                        <p:inputTextarea id="disNotas" value="#{distribuidorMB.distribuidor.notas}" style="width: 250px;" readonly="#{pruebaBean.enDetalles}"/>
                        <p:message for="disNotas" />


                    </p:panelGrid>
                    <f:facet name="footer">
                        <p:commandButton 
                            value="Aceptar" 
                            icon="ui-icon-disk"
                            update="@form"
                            actionListener="#{distribuidorMB.registarDistribuidor(e)}" process=":form"/>
                        <p:commandButton value="Cancelar" icon="ui-icon-cancel" actionListener="#{distribuidorMB.cancelar()}" onclick="PF('nuevoDistribuidor').hide();" update="@form"/>                        
                    </f:facet>
                </p:dialog>



            </p:panel>    
        </h:form>
    </ui:define>

</ui:composition>
